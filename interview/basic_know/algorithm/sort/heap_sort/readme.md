[source](https://juejin.cn/post/7007610680891146271)

# 数据结构与算法之 —— 堆(Heap)和堆排序
- ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ff500aea0c404a6687bb87015456ba82~tplv-k3u1fbpfcp-watermark.awebp)
  这张图是什么， 体现了哪些？
  1. 完全二叉树
  2. 堆
  3. 大顶堆
  4. 堆用数组存储

- 堆 是一种特殊的树，满足以下条件即为堆
  - 完全二叉树
    除了最后一层，其他层的节点个数都是满的，最后一层的节点都集中在左部连续位置
  - 堆中每一个节点的值都必须大于等于（或小于等于）其左右子节点的值
    - 每个节点都大于等于其子树节点的堆叫“大顶堆“，根是最大值
    - 每个节点都小于等于其子树节点的堆叫“小顶堆“，根是最小值
    ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b1175ae00df148ba906997b915737d10~tplv-k3u1fbpfcp-watermark.awebp)

- 堆和bst  相比， 显得？
  不那么严格
  同一组数据可以构成不同的堆
  ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b569b963108b4ba0892ad21419e3e653~tplv-k3u1fbpfcp-watermark.awebp)

- 使用数组来存储堆
  完全二叉树适用于数组存储法
  i 结点的父结点 par = floor((i-1)/2) 「向下取整」
  会忘？ 想下  2， 3  元素
  2. i 结点的左子结点 2 * i +1
  3. i 结点的右子结点 2 * i + 2
  看那张图

  如果让下标从1开始呢？
  给定一个节点的下标 i （i从1开始） ，那么它的父节点一定为 A[i/2] ，左子节点为 A[2i] ，右子节点为 A[2i+1]

- 如何创建一个大顶堆？
  插入式创建：每次插入一个节点，实现一个大顶堆（或小顶堆）
  1. 将节点插入到队尾
  2. 自下往上堆化
    将插入节点与其父节点比较，如果插入节点大于父节点（大顶堆）或插入节点小于父节点（小顶堆），则插入节点与父节点调整位置
  3. 一直重复上一步，直到不需要交换或交换到根节点，此时插入完成。
  
  1.js 

  原地创建：又称堆化，给定一组节点，实现一个大顶堆（或小顶堆）



- 插入或删除    不满足堆的定义
  ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9947b64138bf41fa921eafe5717ad58b~tplv-k3u1fbpfcp-watermark.awebp)
  

- 在插入或删除操作后需要进行调整，让其重新满足堆的特性，这个调整的过程叫做堆化
  分为两种， 
  1. 从下往上 上浮
  2. 从上往下