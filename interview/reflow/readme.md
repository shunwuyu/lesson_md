- 如何测试页面的性能？
- 如何减少回流和重绘呢？
- js fragment 优化了谁？
- css  calc 那么牛逼， 为什么不常用
- css 动画比js 高效? 
- classList.add   有什么优势？

DOM Tree HTML标签，包括display:none隐藏，还有用JS动态添加的元素等
render tree 识别样式 每个NODE都有自己的style 不包含隐藏的节点
DOM Tree和我们写的CSS结合在一起之后，渲染出了render tree

render tree中的一部分(或全部)因为元素的规模尺寸，布局，隐藏等改变而需要重新构建。这就称为回流(reflow) 

每个页面至少需要一次回流，就是在页面第一次加载的时候，这时候是一定会发生回流的，因为要构建render tree。
在回流的时候，浏览器会使渲染树中受到影响的部分失效，并重新构造这部分渲染树，完成回流后，浏览器会重新绘制受影响的部分到屏幕中，该过程成为重绘。

什么是重绘
些元素需要更新属性，而这些属性只是影响元素的外观，风格 background-color。则就叫称为重绘。

回流必将引起重绘，而重绘不一定会引起回流。比如：只有颜色改变的时候就只会发生重绘而不会引起回流

当页面布局和几何属性改变时就需要回流
添加或者删除可见的DOM元素，元素位置改变，元素尺寸改变——边距、填充、边框、宽度和高度，内容改变

回流比重绘的代价要更高  回流的花销跟render tree有多少节点需要重新构建有关系
浏览器会维护1个队列，把所有会引起回流、重绘的操作放入这个队列，等队列中的操作到了一定的数量或者到了一定的时间间隔，浏览器就会flush队列，进行一个批处理。这样就会让多次的回流、重绘变成一次回流重绘。
虚拟DOM 

比如改变样式的时候，不去改变他们每个的样式，而是直接改变className 就要用到cssText 但是要注意有一个问题，会把原有的cssText清掉，比如原来的style中有’display:none;’，那么执行完上面的JS后，display就被删掉了。
div里面有三个子元素p，如果添加div再在里面添加三次p，这样就触发很多次回流和重绘，我们可以用cloneNode(true or false) 来避免，一次把要添加的都克隆好再appened就好了

-- CSS
  避免过多的样式嵌套  一次性找到这个样式
  避免css 表达式  每次绘制过程都会执行 减少回流和重排的次数 
  使用绝对定位， 可以让动画元素脱离文档流   
  避免使用table 布局   多次布局
  尽量不使用float  -》 flex
  图片最好设置 width 和height  空白到增大
  减少浏览器不必要的任务， 减少页面重新布局
  viewport 屏幕缩放级别 移动端
  避免频繁设置样式， 最好把style 属性设置完成后， 进行一次性更改。class
- 避免使用引起回流/重绘的属性， 最好把相应变量缓存起来。 

JS
  - 最小化回流和重排 
    - 避免频繁操作DOM, 可以合并并多次对DOM 修改， 然后一次性批量梳理

  - 控制绘制过程和绘制区域 
    - 开销比较大的属性减少使用
    - 减少绘制区域范围

实验  
