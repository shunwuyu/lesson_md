[source](https://juejin.im/post/5df5bcea6fb9a016091def69#heading-0)

## 缓存
- 首先通过 Cache-Control 验证强缓存是否可用
  HTTP 1.1/ 1.0
  - 如果强缓存可用，直接使用
  - 否则进入协商缓存，即发送 HTTP 请求，服务器通过请求头中的If-Modified-Since或者If-None-Match字段检查资源是否更新
    * 若资源更新，返回资源和200状态码
    * 否则，返回304，告诉浏览器直接从缓存获取资源

## ETag
 ETag 是服务器根据当前文件的内容，给文件生成的唯一标识，只要里面的内容有改动，这个值就会变。服务器通过响应头把这个值给浏览器。

 1. 客户端向服务器请求资源S

2. 服务器返回数据，并带上一个 Etag

3. 客户端再次请求资源S，由于上次服务器给他返回了一个 Etag，这次请求的时候他会带上这个 Etag

4. 服务器发现请求中包含 Etag，判断是否过期，没过期则返回 304 Not Modified

5. 客户端强制刷新（如chrome中ctrl+shift+R刷新页面），请求中剔除 Etag

6. 服务器未发现请求中包含 Etag，返回资源S，并带上一个 Etag

304 如果客户端发送了一个带条件的GET 请求且该请求已被允许，而文档的内容（自上次访问以来或者根据请求的条件）并没有改变，则服务器应当返回这个304状态码。简单的表达就是：服务端已经执行了GET，但文件未变化。

