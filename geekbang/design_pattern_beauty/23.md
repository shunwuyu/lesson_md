# 实战一（上）：针对业务系统的开发，如何做需求分析和设计？
- 自己研究怎么用
- 百度淘宝积分规则

不能把自己放在执行者的角色， 独立负责一个系统的能力， 端到端
负责一个完整的系统

前期的需求沟通分析、中期的代码设计实现、后期的系统上线运维。
积分兑换系统的开发实战， 
一个业务系统从需求分析到上线维护的整个开发套路， 

## 需求分析

促进消费、增加用户粘性， 比如淘宝积分、信用卡积分、商声消费积分
淘宝积分系统。

参与到产品设计中。 产品设计文档（PRD）、线框图
并不是完全的技术控。 工程师来完成的， 引入产品经理的角色。 

不要闷头想。  不要从零开始做。 学会借鉴。
创造的一大秘诀是要懂得隐藏你的来源

亲自用淘宝、看看积分是怎么使用的， 淘宝积分规则

自己的产品， 做微创新。

一个是赚取积分
  积分赚取渠道 下订单、每日签到、评论
  还包括积分兑换规则
  订单金额与积分的兑换比例，每日签到赠送多少积分
另一个是消费积分
  抵扣订单金额、兑换优惠券、积分换购、参与活动扣积分
  多少积分可以换算成抵扣订单的多少金额，一张优惠券需要多少积分来兑换

积分的有效期问题
线框图、用户用例（user case）
用户故事（user story）

- 有关积分有效期的用户用例
  - 用户在获取积分的时候， 会告知积分的有效期；
  - 用户在使用积分的时候， 会俦使用快过期的积分；
  - 用户在查询积分明细的时候，会显示积分的有效期和状态
  - 用户在查询总可用积分的时候，会排除掉过期的积分。

1. 积分赚取和兑换规则
积分的赚取渠道包括: 下订单、每日签到、评论等

签到送 10 积分 按照订单总金额的 10% 兑换成积分  
不同的店铺、不同的商品，可以设置不同的积分兑换比例

积分的有效期，我们可以根据不同渠道，设置不同的有效期

2. 积分消费和兑换规则
抵扣订单金额、兑换优惠券、积分换购、参与活动扣积分等

3. 积分及其明细查询
查询用户的总积分，以及赚取积分和消费积分的历史记录

面向对象设计聚焦在代码层面 类
那系统设计就是聚焦在架构层面 模块
很多相似之处

面向对象设计的四个步骤吗？

1. 合理地将功能划分到不同模块
面向对象设计的本质就是把合适的代码放到合适的类中

方式一： 积分赚取渠道及兑换规则、消费渠道及兑换规则的管理和维护（增删改查），不划分到积分系统中，而是放到更上层的营销系统中。
增加积分 减少积分、查询积分、查询积分明细

订单系统通过异步发送消息或者同步调用接口的方式， 
营销系统根据拿到的订单信息，查询订单对应的积分兑换规则（兑换比例、有效期等），计算得到订单可兑换的积分数量，然后调用积分系统的接口给用户增加积分。

第二种划分方式是： 积分赚取渠道及兑换规则、消费渠道及兑换规则的管理和维护，分散在各个相关业务系统中，比如订单系统、评论系统、签到系统、换购商城、优惠券系统等。

第三种划分方式是：所有的功能都划分到积分系统中，
包括积分赚取渠道及兑换规则、消费渠道及兑换规则的管理和维护。还是同样的例子，用户下订单成功之后，订单系统直接告知积分系统订单交易成功，积分系统根据订单信息查询积分兑换规则，给用户增加积分

如果一个功能的修改或添加，经常要跨团队、跨项目、跨系统才能完成，那说明模块划分的不够合理，职责不够清晰，耦合过于严重。

一种是同步接口调用，另一种是利用消息中间件异步调用。第一种方式简单直接，第二种方式的解耦效果更好。

接口设计、数据库设计和业务模型设计。


  
    


