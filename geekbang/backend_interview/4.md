# 网络编程原理：一个字符的互联网之旅

互联网应用程序，核心通过互联网发送到后端的数据中心进行处理。 
微信 自己建设， 多个地区部署的大规模机房， 云服务虚拟主机

淘宝输入框  a
手机发送到淘宝的数据中心 计算结果 返回手机？

Tomcat web容器管理网络通信， 服务间网络通过Dubbo分布式服务框架完成网络通信。 

DNS
Internet Protocol  IP 协议
- 淘宝App如何知道数据中心服务器的IP地址呢？
写IP？ DNS域名解析服务器
CDN
App 请求的数据最先到达的是运营服务商的机房， 骨干网络
和交互节点， 运营商提供了互联网接入服务。 
提高请求访问的速度， 也为了降低数据中心的负载压力。 
静态图片， 资源文件  
image.taobao.com
动态的， search.taobao.com
HTTP协议
HTTP是一个应用层协议， 当我们进行网络通信编程时， 应用程的通信协议， 底层协议， 两个节点建立连接完成数据传输， TCP协议
403 请求未授权
500 请求未完成， 502 请求处理超时， 503服务器过载 

TCP
socket 接口进行网络编程， 

IP 协议不是一个可靠的通信协议， 并不会确保数据一定送达。 传输层协议TCP。 
App 和服务器之间发送三次报文才建立一个连接， 
- SYN 表示请求建立连接， ACK表示确认。 
  SYN = 1, Seq = X  X是随机数 
- 服务器应答SYN=1, ACK=X+1, Seq=Y 同意建立连接
ACK = Y+1 
- App收到这个报文， 检查ACK的值为自己发送的Seq值——1
ACK= Y+1 发送给服务器， 
- 服务器检查ACK为自己发送的Seq +1  就可以进行数据传输了。 

TCP包含端口信息， 
数据链路层构建出来的数据帧大概是这个样子， 

LB（负载均衡）
首先到达的是搜索服务器集群的负载均衡服务器  DNS解析出来的是负载均衡服务器的IP地址。 
Linux 内核支持的链路层负载均衡
修改数据帧中的mac 地址， 某个服务器的mac 地址， 然后将数据重新发回服务器集群所在的局域网。 

本地缓存 